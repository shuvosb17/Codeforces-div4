## 🧩 Problem Title

**C. Modify String by Replacing Last Two Characters**

---

## 🎯 Learning Outcomes

After successfully solving and understanding this program, the learner will be able to:

1. **Understand string manipulation** using indexing and substring logic in C++.
2. **Use built-in string functions** like `.size()` to manage dynamic data.
3. **Apply looping constructs** for multiple test cases efficiently.
4. **Analyze how strings are stored and managed in memory**, including stack and heap allocation.
5. **Comprehend automatic memory management** through constructors and destructors in the `std::string` class.

---

## ⚙️ Problem Understanding

The task is simple:
For each test case, you are given a single string `s`.
You must **remove the last two characters** from it and then **append the letter `'i'`** at the end before printing the result.

---

### 🔹 Example

If the input is:
`s = "coding"`
Then the output will be:

* Remove last two characters: `"codi"`
* Append `'i'` → `"codii"`

Final output: **codii**

---

## 🧮 Algorithm Steps

1. Read the number of test cases `t`.
2. For each test case:

   * Input a string `s`.
   * Calculate the new size as `size = s.size() - 2`.
   * Print all characters of `s` up to this new size.
   * Append and print `'i'`.
   * Move to the next line.
3. End program execution.

---

## 🧩 Example Walkthrough

**Input:**

```
3
coding
practice
hello
```

**Processing and Output:**

| Input    | Step 1: Remove Last 2 | Step 2: Add ‘i’ | Output  |
| -------- | --------------------- | --------------- | ------- |
| coding   | codi                  | codi + i        | codii   |
| practice | practi                | practi + i      | practii |
| hello    | hel                   | hel + i         | heli    |

**Final Output:**

```
codii
practii
heli
```

---

## 💻 Final C++ Code

```cpp
#include <bits/stdc++.h>
using namespace std;

int main() {
    int t;
    cin >> t;
    string s;

    for (int i = 0; i < t; i++) {
        cin >> s;
        int size = s.size() - 2;
        for (int j = 0; j < size; j++) {
            cout << s[j];
        }
        cout << "i" << endl;
    }

    return 0;
}
```

---

## ⚙️ Time and Space Complexity

| Complexity Type      | Description                                                                   |
| -------------------- | ----------------------------------------------------------------------------- |
| **Time Complexity**  | O(n × t), where *n* is the string length and *t* is the number of test cases. |
| **Space Complexity** | O(1), since only one string object is used at a time.                         |

---

## 🧠 Memory Allocation and Management in Detail

Understanding how `std::string` works internally helps you grasp what happens during program execution:

### 1. **Variable Allocation**

When you declare:

```cpp
string s;
```

* The **string object (`s`)** is created on the **stack**.
* Internally, this object contains:

  * A **pointer** to dynamically allocated memory (heap) where characters are stored.
  * An **integer for size** (number of characters currently in use).
  * An **integer for capacity** (the total allocated buffer size).

So, conceptually:

```
Stack (local variables):
+-----------------------+
| string s             |
| - pointer → Heap addr |
| - size               |
| - capacity           |
+-----------------------+
```

---

### 2. **Input Stage**

When the user enters a word, e.g.,

```
s = "coding"
```

the process is:

* The input characters are copied into the **heap memory** managed by the string.
* The string object updates its:

  * `size = 6`
  * `capacity` (often 15 or more due to optimization)
  * `pointer` now points to the heap area storing `"coding\0"`.

Memory Layout:

```
Stack:
s → pointer to heap memory
size = 6
capacity = 15

Heap:
[c][o][d][i][n][g][\0]
```

---

### 3. **Loop Processing**

When the loop runs:

```cpp
for (int j = 0; j < size; j++) {
    cout << s[j];
}
```

* The program accesses each character one by one from the heap via the pointer stored in `s`.
* `s[j]` is equivalent to reading *(pointer + j)* in memory.

Then:

```cpp
cout << "i";
```

prints the additional `'i'`.

---

### 4. **End of Iteration**

When the next test case begins:

* The **previous string data** may be reused or reallocated by the string class.
* When the string goes out of scope (e.g., after the program ends), the **destructor** automatically frees the heap memory, preventing memory leaks.

---

### 🧩 Visualization Example

For the input `"hello"`:

```
Stack (during runtime):

| Variable | Memory Content (simplified)                  |
|-----------|---------------------------------------------|
| t         | 3                                           |
| s         | pointer → 0xAA12 (heap), size=5, capacity=15|

Heap Memory (0xAA12):  
[h][e][l][l][o][\0]
```

After processing (printing `heli`):

* No new memory is created.
* Only `cout` sends characters sequentially to output.

When program ends:

* `s` destructor releases the heap memory.

---

## 🧾 Summary

| Concept             | Explanation                                                        |
| ------------------- | ------------------------------------------------------------------ |
| **Objective**       | Remove last two characters of input string and append `'i'`.       |
| **Core Operations** | `.size()`, indexing (`s[j]`), dynamic memory management.           |
| **Storage**         | Stack for `std::string` object, heap for actual text data.         |
| **Memory Handling** | Automatic allocation and deallocation handled by C++ string class. |
| **Optimization**    | Short strings may be stored using Small String Optimization (SSO). |

---

## 🧩 Conclusion

Through this program, the learner gains a clear understanding of:

* **Dynamic string handling** in C++.
* **How string data is managed in memory (stack + heap).**
* **Automatic memory management** using the `std::string` class.
* **Basic algorithm design** using loops and indexing for string transformation tasks.
